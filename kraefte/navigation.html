<html>
<head>
  <script src="../p5.min.js"></script>
  <script>

    let m;
    let trechts = false;
    let tlinks = false;
    let tw = false;     // Taste w

    function setup() {
      createCanvas(400, 400);
      m = new Mover();
    }

    function draw() {
      background(0);

      if (tw) {
        let schub = m.richtung.copy();
        schub.setMag(0.1);
        m.applyForce(schub);
      }

      if (m.v.mag() > 0.001) {
        let friction = m.v.copy();
        friction.setMag(-0.04);
        m.applyForce(friction);
      }
      else {
        m.v.mult(0);
      }
      m.act();

    }

    function keyPressed() {
      if (keyCode === LEFT_ARROW) tlinks = true;
      if (keyCode === RIGHT_ARROW) trechts = true;
      if (key.toLowerCase() === 'w') tw = true;
    }

    function keyReleased() {
      if (keyCode === LEFT_ARROW) tlinks = false;
      if (keyCode === RIGHT_ARROW) trechts = false;
      if (key.toLowerCase() === 'w') tw = false;
    }

    class Mover {

      constructor() {
        this.pos = createVector(30, 30);
        this.v = createVector(0, 0);
        this.a = createVector(0, 0);
        this.richtung = createVector(1, 0);   // Die Ausrichtung des Movers
      }

      applyForce(force) {
        this.a.add(force);
      }

      act() {
        this.check();
        this.move();
        this.display();
      }

      move() {
        this.v.add(this.a);
        this.pos.add(this.v);
        this.a.mult(0);
      }

      display() {
        fill(255);
        stroke(255);
        strokeWeight(2);
        push();
        translate(this.pos.x, this.pos.y)
        rotate(this.richtung.heading() - PI / 2);
        ellipse(0, 0, 10, 10);
        line(0,0,0,10);
        pop();
      }

      check() {
        if (tlinks) this.richtung.rotate(-0.1);
        if (trechts) this.richtung.rotate(0.1);

        if (this.pos.x > width + 5) this.pos.x = -5;
        if (this.pos.y > height + 5) this.pos.y = -5;
        if (this.pos.x < -5) this.pos.x = width + 5;
        if (this.pos.y < -5) this.pos.y = height + 5;
      }
    }
  </script>
</head>
<body>
</body>
</html>